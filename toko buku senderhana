# =============================
# SISTEM TOKO BUKU SEDERHANA
# =============================

# ASCII BANNER
def banner():
    print(r"""
   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—
   â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â•â•â•     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•
      â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ•—    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• 
      â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•— 
      â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•—
      â•šâ•â•    â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â• â•šâ•â•â•â•â•â•     â•šâ•â•â•â•â•â•  â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•
             SISTEM TOKO BUKU â€¢ SIMPLE VERSION
    """)

# =============================
# DATA BUKU
# =============================

buku_list = [
    {
        "judul": "Laskar Pelangi",
        "penulis": "Andrea Hirata",
        "harga": 80000,
        "stok": 5,
        "deskripsi": "Kisah inspiratif tentang anak-anak di Belitung.",
        "rating": "4.5â˜…"
    },
    {
        "judul": "Bumi",
        "penulis": "Tere Liye",
        "harga": 90000,
        "stok": 3,
        "deskripsi": "Petualangan fantasi remaja dengan dunia misterius.",
        "rating": "4â˜…"
    },
    {
        "judul": "Negeri 5 Menara",
        "penulis": "A Fuadi",
        "harga": 75000,
        "stok": 4,
        "deskripsi": "Perjalanan hidup penuh motivasi di pesantren.",
        "rating": "4â˜…"
    },
    {
        "judul": "Mariposa",
        "penulis": "Luluk HF",
        "harga": 85000,
        "stok": 7,
        "deskripsi": "Cerita romantis remaja penuh perjuangan dan harapan.",
        "rating": "4â˜…"
    },
    {
        "judul": "Ayat-Ayat Cinta",
        "penulis": "Habiburrahman El Shirazy",
        "harga": 79000,
        "stok": 5,
        "deskripsi": "Kisah cinta berlatar Mesir dengan nilai religius kuat.",
        "rating": "5â˜…"
    },
    {
        "judul": "Koala Kumal",
        "penulis": "Raditya Dika",
        "harga": 60000,
        "stok": 8,
        "deskripsi": "Cerita humor dan pengalaman hidup cinta yang lucu.",
        "rating": "4â˜…"
    },
    {
        "judul": "Ronggeng Dukuh Paruk",
        "penulis": "Ahmad Tohari",
        "harga": 72000,
        "stok": 3,
        "deskripsi": "Kisah kehidupan Srintil di sebuah desa tradisional Jawa.",
        "rating": "4â˜…"
    },
    {
        "judul": "Dilan 1990",
        "penulis": "Pidi Baiq",
        "harga": 78000,
        "stok": 9,
        "deskripsi": "Romansa remaja Bandung yang penuh kenangan manis.",
        "rating": "5â˜…"
    },
    {
        "judul": "Cantik Itu Luka",
        "penulis": "Eka Kurniawan",
        "harga": 95000,
        "stok": 4,
        "deskripsi": "Cerita epik tentang kehidupan, sejarah, dan tragedi keluarga.",
        "rating": "5â˜…"
    },
    {
        "judul": "Pulang",
        "penulis": "Leila S. Chudori",
        "harga": 99000,
        "stok": 6,
        "deskripsi": "Kisah keluarga yang terpisah karena masa kelam sejarah Indonesia.",
        "rating": "5â˜…"
    }
]

pembeli_akun = {"beli": "123"}
keranjang = []

# =============================
# FUNGSI
# =============================

def garis():
    print("=" * 60)

def tampil_buku():
    garis()
    print("ğŸ“š DAFTAR BUKU TERSEDIA")
    garis()

    nomor = 1
    for b in buku_list:
        print(f"{nomor}. {b['judul']} - {b['penulis']} | Rp {b['harga']} | Stok: {b['stok']} | Rating: {b['rating']}")
        nomor += 1


def cari_buku():
    ditemukan = False
    while not ditemukan:
        garis()
        print("ğŸ” PENCARIAN BUKU")
        garis()

        kata = input("Masukkan judul atau penulis: ").lower()

        nomor = 1
        ditemukan = False

        for b in buku_list:
            if kata in b["judul"].lower() or kata in b["penulis"].lower():
                print(f"{nomor}. {b['judul']} - {b['penulis']} | Rp {b['harga']}")
                print("   Deskripsi:", b["deskripsi"])
                print("   Rating:", b["rating"])
                print("   Stok:", b["stok"])
                nomor += 1
                ditemukan = True

        if not ditemukan:
            print("âŒ Tidak ditemukan! Coba lagi.")


def tambah_keranjang():
    tampil_buku()
    bukuditemukan = True
    stokada = True
    while bukuditemukan or stokada:
        pilih = input("Masukkan judul buku: ").lower()
        
        for b in buku_list:
            if b["judul"].lower() == pilih:
                qty = int(input("Jumlah yang dibeli: "))

                if qty <= 0:
                    print("âŒ Jumlah tidak valid!")
                    return

                if b["stok"] >= qty:
                    keranjang.append({
                        "judul": b["judul"],
                        "harga": b["harga"],
                        "qty": qty
                    })
                    b["stok"] -= qty
                    print("âœ” Buku berhasil ditambahkan ke keranjang!")
                else:
                    print("âŒ Stok habis!")
                    stokada = False
                return
        bukuditemukan = False
        print("âŒ Buku tidak ditemukan!")


def lihat_keranjang():
    garis()
    print("ğŸ›’ KERANJANG BELANJA")
    garis()

    if len(keranjang) == 0:
        print("Keranjang kosong.")
        return

    total = 0
    nomor = 1
    for item in keranjang:
        subtotal = item["harga"] * item["qty"]
        print(f"{nomor}. {item['judul']} (x{item['qty']}) - Rp {subtotal}")
        total += subtotal
        nomor += 1

    print("ğŸ’° Total belanja: Rp", total)


def pembayaran():
    if len(keranjang) == 0:
        print("Keranjang masih kosong!")
        return

    garis()
    print("ğŸ’µ PEMBAYARAN")
    garis()

    total = sum(item["harga"] * item["qty"] for item in keranjang)
    print("Total yang harus dibayar:", total)

    bayar = int(input("Masukkan uang anda: "))

    while bayar < total:
        print("âŒ Uang tidak cukup!")
        bayar = int(input("Masukkan uang lagi: "))

    kembali = bayar - total
    print("âœ” Pembayaran berhasil!")

    cetak_struk(total, bayar, kembali, keranjang)

    keranjang.clear()
    
    while True:
        keluar = input("Apakah ingin keluar dari program? (y/n): ").lower()

        if keluar == "y":
            print("Program dihentikan. Terima kasih! ğŸ‘‹")
            exit()
        elif keluar == "n":
            print("Kembali ke menu pembeli...")
            return
        else:
            print("Input salah! Ketik 'y' atau 'n'.")



# =============================
# MENU OPERATOR
# =============================

def menu_operator():
    while True:
        garis()
        print("âš™ MENU OPERATOR")
        garis()
        print("1. Tambah Buku\n2. Restock Buku\n3. Lihat Buku\n4. Logout")

        pilih = input("Pilih: ")

        if pilih == "1":
            tambah_buku()
        elif pilih == "2":
            restock_buku()
        elif pilih == "3":
            tampil_buku()
        elif pilih == "4":
            break
        else:
            print("Input salah!")


def tambah_buku():
    print("=== Tambah Buku Baru ===")
    judul = input("Judul: ")
    penulis = input("Penulis: ")
    harga = int(input("Harga: "))
    stok = int(input("Stok: "))
    deskripsi = input("Deskripsi: ")
    rating = input("Rating: ")

    buku_list.append({
        "judul": judul,
        "penulis": penulis,
        "harga": harga,
        "stok": stok,
        "deskripsi": deskripsi,
        "rating": rating
    })

    print("âœ” Buku berhasil ditambahkan!")


def restock_buku():
    tampil_buku()
    restock = True
    while restock :
        judul = input("Judul buku untuk restock: ").lower()
        for b in buku_list:
            if b["judul"].lower() == judul:
                tambah = int(input("Tambah stok: "))
                b["stok"] += tambah
                print("âœ” Berhasil restock!")
                return
        print("âŒ Buku tidak ditemukan!")

# =============================
# MENU PEMBELI
# =============================

def menu_pembeli():
    while True:
        garis()
        print("ğŸ§ MENU PEMBELI")
        garis()
        print("1. Lihat Buku\n2. Cari Buku\n3. Tambah Keranjang\n4. Lihat Keranjang\n5. Pembayaran\n6. Logout")

        pilih = input("Pilih: ")

        if pilih == "1":
            tampil_buku()
        elif pilih == "2":
            cari_buku()
        elif pilih == "3":
            tambah_keranjang()
        elif pilih == "4":
            lihat_keranjang()
        elif pilih == "5":
            pembayaran()
            break
        elif pilih == "6":
            break
        else:
            print("Input salah!")


# =============================
# LOGIN SYSTEM
# =============================

def login_operator():
    while True:
        garis()
        print("ğŸ” LOGIN OPERATOR")
        garis()

        user = input("Username: ")
        pw = input("Password: ")

        if user == "admin" and pw == "123":
            print("âœ” Login berhasil!")
            menu_operator()
            break
        else:
            print("âŒ Salah! Coba lagi.")


def login_pembeli():
    while True:
        garis()
        print("ğŸ” LOGIN PEMBELI")
        garis()

        user = input("Username: ")
        pw = input("Password: ")

        if user in pembeli_akun and pembeli_akun[user] == pw:
            print("âœ” Login berhasil!")
            menu_pembeli()
            break
        else:
            print("âŒ Username/password salah.")


# =============================
# MAIN MENU
# =============================

def main():
    banner()
    while True:
        garis()
        print("ğŸ  MENU UTAMA")
        garis()

        print("1. Login Operator\n2. Login Pembeli\n3. Keluar")
        pilih = input("Pilih: ")

        if pilih == "1":
            login_operator()
        elif pilih == "2":
            login_pembeli()
        elif pilih == "3":
            print("Terima kasih telah menggunakan sistem ini.")
            break
        else:
            print("Input salah!")

def cetak_struk(total, bayar, kembali, keranjang):
    garis()
    print("ğŸ§¾ STRUK PEMBELIAN TOKO BUKU")
    garis()

    nomor = 1
    for item in keranjang:
        subtotal = item["harga"] * item["qty"]
        print(f"{nomor}. {item['judul']} x{item['qty']} - Rp {subtotal}")
        nomor += 1

    print("--------------------------------------------")
    print(f"Total Belanja : Rp {total}")
    print(f"Uang Bayar    : Rp {bayar}")
    print(f"Kembalian     : Rp {kembali}")
    garis()
    print("Terima kasih telah berbelanja!")
    garis()

main()
